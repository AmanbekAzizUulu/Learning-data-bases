### Оператор HAVING

Оператор `HAVING` в SQL используется для фильтрации результатов, которые были агрегированы с использованием `GROUP BY`. В отличие от `WHERE`, который фильтрует строки до их агрегирования, `HAVING` фильтрует результаты после применения агрегатных функций.

### Пример использования `HAVING`

#### Таблица `sales`

| salesperson | region   | sales |
|-------------|----------|-------|
| Alice       | East     | 5000  |
| Bob         | West     | 4000  |
| Alice       | East     | 7000  |
| Bob         | West     | 3000  |
| Alice       | North    | 10000 |
| Charlie     | South    | 6000  |
| Charlie     | South    | 8000  |

#### Задача

Найти регионы, где общие продажи превышают 10000.

#### Запрос с использованием `HAVING`

```sql
SELECT region, SUM(sales) AS total_sales
FROM sales
GROUP BY region
HAVING SUM(sales) > 10000;
```

### Объяснение

1. **SELECT region, SUM(sales) AS total_sales**:
   - Выбираются столбцы `region` и суммарные продажи `SUM(sales)` для каждого региона. Результат агрегатной функции `SUM` присваивается алиасу `total_sales`.

2. **FROM sales**:
   - Исходная таблица данных - `sales`.

3. **GROUP BY region**:
   - Группировка данных по региону. Все строки с одинаковым значением в столбце `region` объединяются в одну группу.

4. **HAVING SUM(sales) > 10000**:
   - Фильтруются группы, для которых суммарные продажи `SUM(sales)` превышают 10000. Это условие применяется после того, как строки были агрегированы.

### Результат выполнения запроса

| region | total_sales |
|--------|-------------|
| East   | 12000       |
| South  | 14000       |

### Пример данных и результирующая таблица

#### Исходные данные:

| region | sales |
|--------|-------|
| East   | 5000  |
| East   | 7000  |
| North  | 10000 |
| South  | 6000  |
| South  | 8000  |
| West   | 4000  |
| West   | 3000  |

#### Группировка по региону и суммирование продаж:

| region | total_sales |
|--------|-------------|
| East   | 12000       |
| North  | 10000       |
| South  | 14000       |
| West   | 7000        |

#### Применение `HAVING`:

- Условие `SUM(sales) > 10000` оставляет только те регионы, где суммарные продажи превышают 10000.

#### Окончательный результат:

| region | total_sales |
|--------|-------------|
| East   | 12000       |
| South  | 14000       |

### Заключение

Оператор `HAVING` позволяет фильтровать данные после их группировки и агрегирования, что делает его полезным для условий, связанных с агрегатными функциями. В нашем примере `HAVING` был использован для того, чтобы выбрать регионы с общими продажами более 10000.