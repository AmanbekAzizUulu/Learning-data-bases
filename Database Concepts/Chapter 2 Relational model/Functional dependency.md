**Functional dependency** (функциональная зависимость) — это фундаментальная концепция в реляционной теории баз данных, которая описывает отношения между атрибутами в таблице. Функциональная зависимость используется для анализа и нормализации схем баз данных, чтобы минимизировать избыточность данных и предотвратить аномалии.

### Основные понятия функциональной зависимости

1. **Определение**:
   - Атрибут Y функционально зависит от атрибута X (записывается как X → Y), если для каждого значения X в таблице существует ровно одно значение Y.
   - Говорят, что X детерминирует Y.

2. **Полная функциональная зависимость**:
   - Атрибут Y полностью функционально зависит от атрибута X, если Y зависит от X и не зависит от любого подмножества X.
   - Это означает, что атрибут Y не может быть детерминирован только частью атрибута X.

3. **Транзитивная зависимость**:
   - Если X → Y и Y → Z, то существует транзитивная зависимость X → Z.
   - Это означает, что значение атрибута Z зависит от X через промежуточный атрибут Y.

4. **Многозначная зависимость**:
   - Атрибут Y многозначно зависит от атрибута X, если каждый X соответствует множеству значений Y.
   - Многозначные зависимости используются для анализа отношений в таблицах, где один атрибут может соответствовать нескольким значениям другого атрибута.

### Пример функциональной зависимости

Рассмотрим таблицу `Students`:

| StudentID | Name    | Major     | Advisor   |
|-----------|---------|-----------|-----------|
| 1         | Alice   | Math      | Dr. Smith |
| 2         | Bob     | Physics   | Dr. Jones |
| 3         | Charlie | Math      | Dr. Smith |

В этом примере:
- `StudentID → Name`: Идентификатор студента (StudentID) уникально определяет имя студента (Name). Это функциональная зависимость, потому что для каждого `StudentID` существует ровно одно значение `Name`.
- `Major → Advisor`: Специализация (Major) определяет академического консультанта (Advisor). Это также функциональная зависимость, поскольку для каждой специализации есть один консультант.

### Примеры различных зависимостей

1. **Полная функциональная зависимость**:
   - В таблице `Orders` с атрибутами `OrderID`, `ProductID`, и `Quantity`, если `OrderID, ProductID → Quantity`, то это полная функциональная зависимость, так как количество зависит от комбинации `OrderID` и `ProductID`, и не может быть детерминировано только одним из них.

| OrderID | ProductID | Quantity |
|---------|-----------|----------|
| 1       | 101       | 5        |
| 1       | 102       | 3        |
| 2       | 101       | 7        |
| 2       | 103       | 2        |
| 3       | 102       | 6        |


2. **Транзитивная зависимость**:
   - В таблице `Employees` с атрибутами `EmployeeID`, `DepartmentID`, и `DepartmentName`, если `EmployeeID → DepartmentID` и `DepartmentID → DepartmentName`, то существует транзитивная зависимость `EmployeeID → DepartmentName`.

### Важность функциональных зависимостей

1. **Нормализация**:
   - Функциональные зависимости используются для нормализации схем баз данных. Нормализация — это процесс разложения таблиц на более мелкие таблицы для устранения избыточности и предотвращения аномалий при вставке, обновлении и удалении.

2. **Целостность данных**:
   - Обеспечение функциональных зависимостей помогает поддерживать целостность данных, гарантируя, что отношения между атрибутами остаются корректными и согласованными.

3. **Оптимизация запросов**:
   - Понимание функциональных зависимостей может помочь в оптимизации запросов и улучшении производительности базы данных.

### Пример нормализации на основе функциональных зависимостей

Исходная таблица `Employees`:

| EmployeeID | Name    | DepartmentID | DepartmentName |
|------------|---------|--------------|----------------|
| 1          | Alice   | 101          | HR             |
| 2          | Bob     | 102          | IT             |
| 3          | Charlie | 101          | HR             |

Функциональные зависимости:
- `EmployeeID → Name, DepartmentID, DepartmentName`
- `DepartmentID → DepartmentName`

Процесс нормализации:
1. Выделение зависимых атрибутов в отдельную таблицу:
   - Таблица `Departments`:

| DepartmentID | DepartmentName |
|--------------|----------------|
| 101          | HR             |
| 102          | IT             |

2. Обновление исходной таблицы для использования внешнего ключа:
   - Таблица `Employees`:

| EmployeeID | Name    | DepartmentID |
| ---------- | ------- | ------------ |
| 1          | Alice   | 101          |
| 2          | Bob     | 102          |
| 3          | Charlie | 101          |

Теперь таблицы нормализованы, и зависимость `DepartmentID → DepartmentName` соблюдается в таблице `Departments`.

Функциональные зависимости играют ключевую роль в проектировании и нормализации баз данных, обеспечивая целостность данных и улучшая их структуру.

![[functional_dependency_explained.png]]

![[You cannot always determine functional dependencies from sample data.png]]